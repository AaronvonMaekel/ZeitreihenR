---
title: "TimeSeries_Class"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{TimeSeries_Class}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(ZeitreihenR)
library(ggplot2)
library(tibble)
```

## Introduction

In this vignette, we will explain the functions of the **TimeSeries** package in R. The package contains S4-classes as well as methods for time series and predictions for them. The definitions and methods are based on the book *Introduction to Time-Series Analysis and Forecasting* by Peter J. Brockwell and Richard A. Davis.

-   S4-class **TimeSeries** with slots standard deviation, length of object and data

-   Child-classes **AR TimeSeries** and **MA TimeSeries**

-   Generators for AR and MA TimeSeries **AR** and **MA**

-   **Resample** function for sampling a time series

-   Vector to time series function **vec_to_ts** which transforms a vector to a time series

### TimeSeries class

A *time series* is a set of observations $x_t$, each one being recorded at a specific time $t$. A time series model for the observed data $x_t$ is a specification of the joint distributions (or possibly only the means and covariances) of a sequence of random variables $X_t$ of which $x_t$ is postulated to be a realization.

### AR TimeSeries and generator

A *AR(p) Process* is a stochastical process which is described by the following model: $X_t$ is an autoregressive process of order $p$ if $X_t = \theta_1 X_{t-1}+...+\theta_p X_{t-p} + Z_t$, where $Z_t \sim \text{WN}(0,\sigma^2)$ and $\theta_1,...,\theta_q$ are constants. We call $Z_t$ white noise and assume that the white noise components are drawn independently from a centered normal distribution with standard deviation *sd*. The function *AR* is a method for the TimeSeries class and generates an AR(p) time series.

#### Example for AR TimeSeries

We start with an example for an AR(2) time series, where we have two parameters and 2 start values.

```{r}
ar1 <- AR(ar_params = c(0.3, 0.7), start_values = c(1,2), n = 30, sd = 1) 
plot_timeseries(ar1) 
```

### MA TimeSeries and generator

A *MA(q) Process* is a stochastical process which is described by the following model: $X_t$ is a moving-average process of order $q$ if $X_t =Z_t +\theta_1Z_{t−1} +···+\theta_q Z_{t−q}$, where $Z_t \sim \text{WN}(0,\sigma^2)$ and $\theta_1,...,\theta_q$ are constants. We call $Z_t$ white noise and assume that the white noise components are drawn independently from a centered normal distribution with standard deviation *sd*. The function *AR* is a method for the TimeSeries class and generates an AR(p) time series.

#### Example for MA TimeSeries
Again, we start with a small example for a MA time series with two parameters and length 30. Note that the MA series does not contain start values. 
```{r}
ma1 <- MA(ma_params = c(0.3,0.7), n=30, sd=1)
plot_timeseries(ma1)
```
### Resample function
The resample function is a function which can be used to resample a time series. It takes a TimeSeries object as input and returns another Timeseries object having the same length, start values, parameters and standard deviation as the original time series.

#### Examples of resampling
We take the two generated from above, resample it and plot the original and the resampled one.
```{r}
ar1 <- AR(ar_params = c(0.3, 0.7), start_values = c(1,2), n = 30, sd = 1)
plot_timeseries(ar1)
plot_timeseries(resample(ar1))
```
```{r}
ma1 <- MA(ma_params = c(0.5, 0.7), n = 30, sd = 1)
plot_timeseries(ma1)
plot_timeseries(resample(ma1))
```

### Custom conversion to time series
We overloaded the as() function to accomodate for conversions to the TimeSeries object. 
It takes a numeric vector and returns a TimeSeries object, having the same length as the vector.
```{r}
vec <- 1:10
vects <- as(vec,"TimeSeries")
plot_timeseries(vects)
```
